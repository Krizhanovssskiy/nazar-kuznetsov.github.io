(window["webpackJsonpfield-calc"]=window["webpackJsonpfield-calc"]||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),s=a(4),i=a.n(s),r=(a(16),a(8)),c=a(5),u=a(6),o=a(9),d=a(7),m=a(10),f=a(1),p=a.n(f),v=a(2);var b=function(e){var t=e.type,a=e.deleteField,s=e.id,i=e.saveField,r=e.date,c=e.startValue,u=Object(l.useState)(c),o=Object(v.a)(u,2),d=o[0],m=o[1],f=Object(l.useState)(!!c),p=Object(v.a)(f,2),b=p[0],E=p[1];return n.a.createElement("div",{className:"field"},n.a.createElement("div",{className:"field-content"},n.a.createElement("div",{className:"date"},r),n.a.createElement("label",{className:"minus"===t?"field-label field-label__warring":"field-label field-label__success"},n.a.createElement("input",{className:"input-field",type:"text",onBlur:function(){i(s,d,t),E(!0)},value:d,onChange:function(e){var t=e.target;E(!1),m(function(e){return e.replace(/[^\d\.]/g,"")}(t.value))},placeholder:"minus"===t?"\u041c\u0438\u043d\u0443\u0441":"\u041f\u043b\u044e\u0441"}),n.a.createElement("span",{className:"minus"===t?"success":"warring"},"minus"===t?"-":"+"),n.a.createElement("button",{className:b?"button-menu":"button-menu menu-no-save",onClick:function(){return a(s)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))))},E=JSON.parse(localStorage.getItem("cart")),g={fields:[{id:p()(),type:"plus",value:"",date:(new Date).toLocaleString()}],total:0,modal:null,lastValue:0,type:null,users:["\u041d\u0430\u0437\u0430\u0440","\u0412\u0438\u0442\u0430\u043b\u0438\u043a","\u041c\u0430\u043c\u0430"],openUser:!1,debtor:null},h=function(e){function t(){var e,a;Object(c.a)(this,t);for(var l=arguments.length,n=new Array(l),s=0;s<l;s++)n[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state=E||g,a.addField=function(e){var t=e.target.getAttribute("data-field"),l={id:p()(),type:t,value:"",date:(new Date).toLocaleString()};a.setState({fields:[].concat(Object(r.a)(a.state.fields),[l])})},a.deleteField=function(e){a.setState({fields:a.state.fields.filter(function(t){return t.id!==e})},a.calc)},a.calc=function(){a.setState(function(e){var t=e.fields.length,a=e.fields.filter(function(e){return""!==e.value});return 0===t.length?{fields:[],debtor:null,lastValue:0,type:null,total:0}:{total:a.reduce(function(e,t){return"plus"===t.type?e+Number(t.value):"minus"===t.type?e-Number(t.value):void 0},0).toFixed(2),lastValue:0===t?0:a[a.length-1]&&a[a.length-1].value,debtor:0===t?null:e.debtor,type:a[a.length-1]&&"minus"===a[a.length-1].type?"-":"+"}},function(){a.saveLocalStorage()})},a.updateField=function(){a.setState(function(e){return{fields:[{id:p()(),type:"plus",value:e.total,date:(new Date).toLocaleString()}],type:"+",lastValue:e.total}},a.saveLocalStorage)},a.saveLocalStorage=function(){localStorage.setItem("cart",JSON.stringify(a.state))},a.setModal=function(e){return a.setState({modal:e})},a.saveField=function(e,t,l){a.setState(function(a){return{fields:a.fields.map(function(a){return a.id===e&&(a.value=t,a.date=(new Date).toLocaleString()),a}),lastValue:t,type:"minus"===l?"-":"+"}},function(){a.setModal(null),a.calc()})},a.showUsers=function(){a.setState({openUser:!0})},a.setUser=function(e){return function(){a.setState({debtor:e,openUser:!1},a.saveLocalStorage)}},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.fields,l=t.lastValue,s=t.type,i=t.debtor;return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"total"},n.a.createElement("p",null,"\u0412\u0441\u0435\u0433\u043e: ",n.a.createElement("br",null)," ",this.state.total," \u0433\u0440\u043d"),n.a.createElement("p",{onClick:this.showUsers},"\u0414\u043e\u043b\u0436\u0435\u043d: ",n.a.createElement("br",null)," ",i),n.a.createElement("p",null,"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0441\u0443\u043c\u043c\u0430: ",n.a.createElement("br",null)," ",s," ",l," \u0433\u0440\u043d")),this.state.openUser&&n.a.createElement("div",{className:"user-modal"},n.a.createElement("ul",null,this.state.users.map(function(t){return n.a.createElement("li",{key:t,onClick:e.setUser(t)},t)}))))),n.a.createElement("main",null,n.a.createElement("div",{className:"container"},a.length>0?a.map(function(t){return n.a.createElement(b,{key:t.id,id:t.id,type:t.type,startValue:t.value,date:t.date,saveField:e.saveField,modal:e.state.modal,deleteField:e.deleteField,setModal:e.setModal})}):null,n.a.createElement("div",{className:"actions"},n.a.createElement("button",{className:"button-minus","data-field":"minus",onClick:this.addField},"-"),n.a.createElement("button",{className:"button-plus","data-field":"plus",onClick:this.addField},"+"),n.a.createElement("button",{onClick:this.updateField},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c ",this.state.total," \u0433\u0440\u043d")))))}}]),t}(l.Component);i.a.render(n.a.createElement(h,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.d7139be2.chunk.js.map