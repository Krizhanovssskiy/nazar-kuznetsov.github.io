{"version":3,"sources":["components/field.js","App.js","index.js"],"names":["type","deleteField","id","modal","setModal","saveField","date","startValue","useState","value","setValue","saved","saveMenu","className","onBlur","onChange","target","replace","onlyDigits","placeholder","onClick","cart","JSON","parse","localStorage","getItem","init","fields","uniqid","Date","toLocaleString","total","lastValue","App","state","addField","getAttribute","field","setState","filter","item","calc","reduce","result","Number","toFixed","saveLocalStorage","fieldChange","setItem","stringify","map","this","length","key","data-field","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ec9b359f.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\n\r\nfunction onlyDigits(value) {\r\n  let result = value.replace(/[^\\d\\.]/g, \"\");\r\n  return result;\r\n}\r\n\r\n\r\nexport default ({\r\n  type,\r\n  deleteField,\r\n  id,\r\n  modal,\r\n  setModal,\r\n  saveField,\r\n  date,\r\n  startValue\r\n}) => {\r\n  const [value, setValue] = useState(startValue);\r\n  const [saved, saveMenu] = useState(startValue ? true : false);\r\n\r\n  const handleClick = () => deleteField(id);\r\n\r\n  const handleChange = ({ target }) => {\r\n    saveMenu(false);\r\n    setValue(onlyDigits(target.value));\r\n  }\r\n\r\n  const openModal = () => setModal(id);\r\n\r\n  const modalClose = () => setModal(null);\r\n\r\n  const save = () => {\r\n    saveField(id, value, type);\r\n    saveMenu(true);\r\n  }\r\n\r\n  const onBlur = () => {\r\n    saveField(id, value, type);\r\n    saveMenu(true);\r\n  }\r\n\r\n  return (\r\n    <div className=\"field\">\r\n      <div className=\"field-content\">\r\n        <label className=\"field-label\">\r\n          <div className=\"date\">{date}</div>\r\n          <input\r\n            className=\"input-field\"\r\n            type=\"text\"\r\n            onBlur={onBlur}\r\n            value={value}\r\n            onChange={handleChange}\r\n            placeholder={type === 'minus' ? 'Минус' : 'Плюс'}\r\n          />\r\n          <span className={type === 'minus' ? 'success' : 'warring'}>{type === 'minus' ? '-' : '+'}</span>\r\n        </label>\r\n        <button className={saved ? \"button-menu\" : \"button-menu menu-no-save\"} onClick={openModal}>Меню</button>\r\n      </div>\r\n      {\r\n        modal === id &&\r\n        <div className=\"field-modal\">\r\n          <button onClick={save}>Сохранить</button>\r\n          <button onClick={handleClick}>Удалить</button>\r\n          <button onClick={modalClose}>Закрыть</button>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n","import React, { Component } from 'react';\nimport uniqid from 'uniqid';\nimport Field from './components/field';\n\nconst cart = JSON.parse(localStorage.getItem('cart'));\n\nconst init = {\n  fields: [{\n    id: uniqid(),\n    type: 'minus',\n    value: '',\n    date: new Date().toLocaleString()\n  }],\n  total: 0,\n  modal: null,\n  lastValue: 0,\n  type: null\n};\n\nclass App extends Component {\n  state = cart || init;\n\n  addField = ({ target }) => {\n    const type = target.getAttribute('data-field');\n\n    const field = {\n      id: uniqid(),\n      type,\n      value: '',\n      date: new Date().toLocaleString()\n    };\n\n    this.setState({ fields: [...this.state.fields, field] });\n  }\n\n  deleteField = id => {\n    this.setState({\n      fields: this.state.fields.filter(item => item.id !== id)\n    }, this.calc)\n  }\n\n  calc = () => {\n    this.setState((state) => {\n      const fields = state.fields.filter(item => item.value !== '');\n      const total = fields.reduce((result, item) => {\n        if (item.type === 'plus') {\n          return result + Number(item.value);\n        } else if (item.type === 'minus') {\n          return result - Number(item.value);\n        }\n      }, 0);\n      return {\n        total: total.toFixed(2)\n      }\n    }, () => {\n      this.saveLocalStorage();\n    })\n  }\n\n  fieldChange = () => {\n\n  }\n\n  saveLocalStorage = () => {\n    localStorage.setItem('cart', JSON.stringify(this.state));\n  }\n\n\n  setModal = id => this.setState({modal: id})\n\n\n  saveField = (id, value, type) => {\n    this.setState((state) => {\n      return {\n        fields: state.fields.map(item => {\n          if (item.id === id) {\n            item.value = value;\n            item.date = new Date().toLocaleString();\n          }\n          return item;\n        }),\n        lastValue: value,\n        type: type === 'minus' ? '-' : '+'\n      }\n    }, () => {\n      this.setModal(null);\n      this.calc();\n    })\n  }\n\n\n\n  render() {\n    const { fields, lastValue, type } = this.state;\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <div className=\"container\">\n            <div className=\"total\">\n              <p>Всего: {this.state.total} грн</p>\n              <span>Последняя сумма: {type} {lastValue} грн</span>\n            </div>\n          </div>\n        </header>\n        <main>\n          <div className=\"container\">\n            {\n              fields.length > 0\n                ? fields.map(item => {\n                  return (\n                    <Field\n                      key={item.id}\n                      id={item.id}\n                      type={item.type}\n                      startValue={item.value}\n                      date={item.date}\n                      saveField={this.saveField}\n                      modal={this.state.modal}\n                      deleteField={this.deleteField}\n                      setModal={this.setModal}\n                    />\n                  )\n                })\n                : null\n            }\n            <div className=\"actions\">\n              <button className=\"button-minus\" data-field=\"minus\" onClick={this.addField}>-</button>\n              <button className=\"button-plus\" data-field=\"plus\" onClick={this.addField}>+</button>\n            </div>\n          </div>\n        </main>\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './main.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}