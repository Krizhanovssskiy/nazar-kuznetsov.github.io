{"version":3,"sources":["components/field.js","App.js","index.js"],"names":["type","deleteField","id","saveField","date","startValue","useState","value","setValue","saved","saveMenu","className","onBlur","onChange","target","replace","onlyDigits","placeholder","onClick","cart","JSON","parse","localStorage","getItem","init","fields","uniqid","Date","toLocaleString","total","modal","lastValue","users","openUser","debtor","App","state","addField","getAttribute","field","setState","filter","item","calc","length","reduce","result","Number","toFixed","saveLocalStorage","updateField","setItem","stringify","setModal","map","showUsers","setUser","this","key","data-field","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d7139be2.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\n\r\nfunction onlyDigits(value) {\r\n    let result = value.replace(/[^\\d\\.]/g, \"\");\r\n    return result;\r\n}\r\n\r\n\r\nexport default ({\r\n    type,\r\n    deleteField,\r\n    id,\r\n    // modal,\r\n    // setModal,\r\n    saveField,\r\n    date,\r\n    startValue\r\n}) => {\r\n    const [value, setValue] = useState(startValue);\r\n    const [saved, saveMenu] = useState(startValue ? true : false);\r\n\r\n    const handleClick = () => deleteField(id);\r\n\r\n    const handleChange = ({ target }) => {\r\n        saveMenu(false);\r\n        setValue(onlyDigits(target.value));\r\n    }\r\n\r\n    // const openModal = () => setModal(id);\r\n\r\n    // const modalClose = () => setModal(null);\r\n\r\n    // const save = () => {\r\n    //     if (value === '') return;\r\n    //     saveField(id, value, type);\r\n    //     saveMenu(true);\r\n    // }\r\n\r\n    const onBlur = () => {\r\n        saveField(id, value, type);\r\n        saveMenu(true);\r\n    }\r\n\r\n    return (\r\n        <div className=\"field\">\r\n            <div className=\"field-content\">\r\n                    <div className=\"date\">{date}</div>\r\n                <label className={type === 'minus' ? 'field-label field-label__warring' : 'field-label field-label__success'}>\r\n                    <input\r\n                        className=\"input-field\"\r\n                        type=\"text\"\r\n                        onBlur={onBlur}\r\n                        value={value}\r\n                        onChange={handleChange}\r\n                        placeholder={type === 'minus' ? 'Минус' : 'Плюс'}\r\n                    />\r\n                    <span className={type === 'minus' ? 'success' : 'warring'}>{type === 'minus' ? '-' : '+'}</span>\r\n                <button className={saved ? \"button-menu\" : \"button-menu menu-no-save\"} onClick={handleClick}>Удалить</button>\r\n                </label>\r\n\r\n            </div>\r\n            {/* {\r\n                modal === id &&\r\n                <div className=\"field-modal\">\r\n                    <button onClick={save}>Сохранить</button>\r\n                    <button onClick={handleClick}>Удалить</button>\r\n                    <button onClick={modalClose}>Закрыть</button>\r\n                </div>\r\n            } */}\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react';\nimport uniqid from 'uniqid';\nimport Field from './components/field';\n\nconst cart = JSON.parse(localStorage.getItem('cart'));\n\nconst init = {\n  fields: [{\n    id: uniqid(),\n    type: 'plus',\n    value: '',\n    date: new Date().toLocaleString()\n  }],\n  total: 0,\n  modal: null,\n  lastValue: 0,\n  type: null,\n  users: ['Назар', 'Виталик', 'Мама'],\n  openUser: false,\n  debtor: null\n};\n\nclass App extends Component {\n  state = cart || init;\n\n  addField = ({ target }) => {\n    const type = target.getAttribute('data-field');\n\n    const field = {\n      id: uniqid(),\n      type,\n      value: '',\n      date: new Date().toLocaleString()\n    };\n\n    this.setState({ fields: [...this.state.fields, field] });\n  }\n\n  deleteField = id => {\n    this.setState({\n      fields: this.state.fields.filter(item => item.id !== id)\n    }, this.calc)\n  }\n\n  calc = () => {\n    this.setState((state) => {\n\n      const length = state.fields.length;\n      const fields = state.fields.filter(item => item.value !== '');\n      if (length.length === 0) {\n        return {\n          fields: [],\n          debtor: null,\n          lastValue: 0,\n          type: null,\n          total: 0\n        }\n      }\n\n      const total = fields.reduce((result, item) => {\n        if (item.type === 'plus') {\n          return result + Number(item.value);\n        } else if (item.type === 'minus') {\n          return result - Number(item.value);\n        }\n      }, 0);\n      return {\n        total: total.toFixed(2),\n        lastValue: length === 0 ? 0 : fields[fields.length - 1] && fields[fields.length - 1].value,\n        debtor: length === 0 ? null : state.debtor,\n        type: fields[fields.length - 1] && fields[fields.length - 1].type === 'minus' ? '-' : '+'\n      }\n    }, () => {\n      this.saveLocalStorage();\n    })\n  }\n\n  updateField = () => {\n    this.setState((state) => {\n      return {\n        fields: [{\n          id: uniqid(),\n          type: 'plus',\n          value: state.total,\n          date: new Date().toLocaleString()\n        }],\n        type: '+',\n        lastValue: state.total\n      }\n    }, this.saveLocalStorage)\n  }\n\n  saveLocalStorage = () => {\n    localStorage.setItem('cart', JSON.stringify(this.state));\n  }\n\n\n  setModal = id => this.setState({ modal: id })\n\n\n  saveField = (id, value, type) => {\n    this.setState((state) => {\n      return {\n        fields: state.fields.map(item => {\n          if (item.id === id) {\n            item.value = value;\n            item.date = new Date().toLocaleString();\n          }\n          return item;\n        }),\n        lastValue: value,\n        type: type === 'minus' ? '-' : '+'\n      }\n    }, () => {\n      this.setModal(null);\n      this.calc();\n    })\n  }\n\n  showUsers = () => {\n    this.setState({ openUser: true });\n  }\n\n\n  setUser = (item) => () => {\n    this.setState({\n      debtor: item,\n      openUser: false\n    }, this.saveLocalStorage)\n  }\n\n  render() {\n    const { fields, lastValue, type, debtor } = this.state;\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <div className=\"container\">\n            <div className=\"total\">\n              <p>Всего: <br /> {this.state.total} грн</p>\n              <p onClick={this.showUsers}>Должен: <br /> {debtor}</p>\n              <p>Последняя сумма: <br /> {type} {lastValue} грн</p>\n            </div>\n            {this.state.openUser &&\n              <div className=\"user-modal\">\n                <ul>\n                  {this.state.users.map(item => {\n                    return (\n                      <li key={item} onClick={this.setUser(item)}>{item}</li>\n                    )\n                  })}\n                </ul>\n              </div>\n            }\n          </div>\n        </header>\n        <main>\n          <div className=\"container\">\n            {\n              fields.length > 0\n                ? fields.map(item => {\n                  return (\n                    <Field\n                      key={item.id}\n                      id={item.id}\n                      type={item.type}\n                      startValue={item.value}\n                      date={item.date}\n                      saveField={this.saveField}\n                      modal={this.state.modal}\n                      deleteField={this.deleteField}\n                      setModal={this.setModal}\n                    />\n                  )\n                })\n                : null\n            }\n            <div className=\"actions\">\n              <button className=\"button-minus\" data-field=\"minus\" onClick={this.addField}>-</button>\n              <button className=\"button-plus\" data-field=\"plus\" onClick={this.addField}>+</button>\n              <button onClick={this.updateField}>Обновить {this.state.total} грн</button>\n            </div>\n          </div>\n        </main>\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './main.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}