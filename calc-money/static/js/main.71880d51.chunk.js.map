{"version":3,"sources":["components/field.js","App.js","index.js"],"names":["type","deleteField","id","modal","setModal","saveField","date","startValue","useState","value","setValue","saved","saveMenu","className","onBlur","onChange","target","replace","onlyDigits","placeholder","onClick","cart","JSON","parse","localStorage","getItem","init","fields","uniqid","Date","toLocaleString","total","lastValue","users","openUser","debtor","App","state","addField","getAttribute","field","setState","filter","item","calc","length","reduce","result","Number","toFixed","saveLocalStorage","fieldChange","setItem","stringify","map","showUsers","setUser","this","key","data-field","Component","ReactDOM","render","document","getElementById"],"mappings":"iSAQe,kBASR,IARLA,EAQI,EARJA,KACAC,EAOI,EAPJA,YACAC,EAMI,EANJA,GACAC,EAKI,EALJA,MACAC,EAII,EAJJA,SACAC,EAGI,EAHJA,UACAC,EAEI,EAFJA,KACAC,EACI,EADJA,WACI,EACsBC,mBAASD,GAD/B,mBACGE,EADH,KACUC,EADV,OAEsBF,qBAASD,GAF/B,mBAEGI,EAFH,KAEUC,EAFV,KA0BJ,OACE,yBAAKC,UAAU,SACb,yBAAKA,UAAU,iBACb,2BAAOA,UAAU,eACf,yBAAKA,UAAU,QAAQP,GACvB,2BACEO,UAAU,cACVb,KAAK,OACLc,OAbK,WACbT,EAAUH,EAAIO,EAAOT,GACrBY,GAAS,IAYDH,MAAOA,EACPM,SA9BW,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACtBJ,GAAS,GACTF,EAvBJ,SAAoBD,GAElB,OADaA,EAAMQ,QAAQ,WAAY,IAsB5BC,CAAWF,EAAOP,SA6BnBU,YAAsB,UAATnB,EAAmB,iCAAU,6BAE5C,0BAAMa,UAAoB,UAATb,EAAmB,UAAY,WAAqB,UAATA,EAAmB,IAAM,MAEvF,4BAAQa,UAAWF,EAAQ,cAAgB,2BAA4BS,QA9B3D,kBAAMhB,EAASF,KA8B3B,6BAGAC,IAAUD,GACV,yBAAKW,UAAU,eACb,4BAAQO,QA/BH,WACG,KAAVX,IACJJ,EAAUH,EAAIO,EAAOT,GACrBY,GAAS,MA4BH,0DACA,4BAAQQ,QA3CI,kBAAMnB,EAAYC,KA2C9B,8CACA,4BAAQkB,QAnCG,kBAAMhB,EAAS,QAmC1B,iDC7DJiB,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,SAEvCC,EAAO,CACXC,OAAQ,CAAC,CACPzB,GAAI0B,MACJ5B,KAAM,OACNS,MAAO,GACPH,MAAM,IAAIuB,MAAOC,mBAEnBC,MAAO,EACP5B,MAAO,KACP6B,UAAW,EACXhC,KAAM,KACNiC,MAAO,CAAC,iCAAS,6CAAW,4BAC5BC,UAAU,EACVC,OAAQ,MAkJKC,E,2MA9IbC,MAAQhB,GAAQK,E,EAEhBY,SAAW,YAAiB,IACpBtC,EADmB,EAAbgB,OACQuB,aAAa,cAE3BC,EAAQ,CACZtC,GAAI0B,MACJ5B,OACAS,MAAO,GACPH,MAAM,IAAIuB,MAAOC,kBAGnB,EAAKW,SAAS,CAAEd,OAAO,GAAD,mBAAM,EAAKU,MAAMV,QAAjB,CAAyBa,O,EAGjDvC,YAAc,SAAAC,GACZ,EAAKuC,SAAS,CACZd,OAAQ,EAAKU,MAAMV,OAAOe,OAAO,SAAAC,GAAI,OAAIA,EAAKzC,KAAOA,KACpD,EAAK0C,O,EAGVA,KAAO,WACL,EAAKH,SAAS,SAACJ,GACb,IAAMQ,EAASR,EAAMV,OAAOkB,OAS5B,MAAO,CACLd,MATaM,EAAMV,OAAOe,OAAO,SAAAC,GAAI,MAAmB,KAAfA,EAAKlC,QAC3BqC,OAAO,SAACC,EAAQJ,GACnC,MAAkB,SAAdA,EAAK3C,KACA+C,EAASC,OAAOL,EAAKlC,OACL,UAAdkC,EAAK3C,KACP+C,EAASC,OAAOL,EAAKlC,YADvB,GAGN,GAEYwC,QAAQ,GACrBjB,UAAsB,IAAXa,EAAe,EAAIR,EAAML,UACpCG,OAAmB,IAAXU,EAAe,KAAOR,EAAMF,SAErC,WACD,EAAKe,sB,EAITC,YAAc,a,EAIdD,iBAAmB,WACjB1B,aAAa4B,QAAQ,OAAQ9B,KAAK+B,UAAU,EAAKhB,S,EAInDjC,SAAW,SAAAF,GAAE,OAAI,EAAKuC,SAAS,CAACtC,MAAOD,K,EAGvCG,UAAY,SAACH,EAAIO,EAAOT,GACtB,EAAKyC,SAAS,SAACJ,GACb,MAAO,CACLV,OAAQU,EAAMV,OAAO2B,IAAI,SAAAX,GAKvB,OAJIA,EAAKzC,KAAOA,IACdyC,EAAKlC,MAAQA,EACbkC,EAAKrC,MAAO,IAAIuB,MAAOC,kBAElBa,IAETX,UAAWvB,EACXT,KAAe,UAATA,EAAmB,IAAM,MAEhC,WACD,EAAKI,SAAS,MACd,EAAKwC,U,EAITW,UAAY,WACV,EAAKd,SAAS,CAACP,UAAU,K,EAI3BsB,QAAU,SAACb,GAAD,OAAU,WAClB,EAAKF,SAAS,CACZN,OAAQQ,EACRT,UAAU,GACT,EAAKgB,oB,wEAGA,IAAD,SACqCO,KAAKpB,MAAzCV,EADD,EACCA,OAAQK,EADT,EACSA,UAAWhC,EADpB,EACoBA,KAAMmC,EAD1B,EAC0BA,OAEjC,OACE,yBAAKtB,UAAU,OACb,4BAAQA,UAAU,cAChB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,SACb,8DAAW4C,KAAKpB,MAAMN,MAAtB,uBACA,uBAAGX,QAASqC,KAAKF,WAAjB,yCAAqCpB,GACrC,wHAAwBnC,EAAxB,IAA+BgC,EAA/B,wBAEDyB,KAAKpB,MAAMH,UACV,yBAAKrB,UAAU,cACb,4BACC4C,KAAKpB,MAAMJ,MAAMqB,IAAI,SAAAX,GACpB,OACE,wBAAIe,IAAKf,EAAMvB,QAAS,EAAKoC,QAAQb,IAAQA,SAQzD,8BACE,yBAAK9B,UAAU,aAEXc,EAAOkB,OAAS,EACZlB,EAAO2B,IAAI,SAAAX,GACX,OACE,kBAAC,EAAD,CACEe,IAAKf,EAAKzC,GACVA,GAAIyC,EAAKzC,GACTF,KAAM2C,EAAK3C,KACXO,WAAYoC,EAAKlC,MACjBH,KAAMqC,EAAKrC,KACXD,UAAW,EAAKA,UAChBF,MAAO,EAAKkC,MAAMlC,MAClBF,YAAa,EAAKA,YAClBG,SAAU,EAAKA,aAInB,KAEN,yBAAKS,UAAU,WACb,4BAAQA,UAAU,eAAe8C,aAAW,QAAQvC,QAASqC,KAAKnB,UAAlE,KACA,4BAAQzB,UAAU,cAAc8C,aAAW,OAAOvC,QAASqC,KAAKnB,UAAhE,a,GAtIIsB,aCjBlBC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.71880d51.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\n\r\nfunction onlyDigits(value) {\r\n  let result = value.replace(/[^\\d\\.]/g, \"\");\r\n  return result;\r\n}\r\n\r\n\r\nexport default ({\r\n  type,\r\n  deleteField,\r\n  id,\r\n  modal,\r\n  setModal,\r\n  saveField,\r\n  date,\r\n  startValue\r\n}) => {\r\n  const [value, setValue] = useState(startValue);\r\n  const [saved, saveMenu] = useState(startValue ? true : false);\r\n\r\n  const handleClick = () => deleteField(id);\r\n\r\n  const handleChange = ({ target }) => {\r\n    saveMenu(false);\r\n    setValue(onlyDigits(target.value));\r\n  }\r\n\r\n  const openModal = () => setModal(id);\r\n\r\n  const modalClose = () => setModal(null);\r\n\r\n  const save = () => {\r\n    if (value === '') return;\r\n    saveField(id, value, type);\r\n    saveMenu(true);\r\n  }\r\n\r\n  const onBlur = () => {\r\n    saveField(id, value, type);\r\n    saveMenu(true);\r\n  }\r\n\r\n  return (\r\n    <div className=\"field\">\r\n      <div className=\"field-content\">\r\n        <label className=\"field-label\">\r\n          <div className=\"date\">{date}</div>\r\n          <input\r\n            className=\"input-field\"\r\n            type=\"text\"\r\n            onBlur={onBlur}\r\n            value={value}\r\n            onChange={handleChange}\r\n            placeholder={type === 'minus' ? 'Минус' : 'Плюс'}\r\n          />\r\n          <span className={type === 'minus' ? 'success' : 'warring'}>{type === 'minus' ? '-' : '+'}</span>\r\n        </label>\r\n        <button className={saved ? \"button-menu\" : \"button-menu menu-no-save\"} onClick={openModal}>Меню</button>\r\n      </div>\r\n      {\r\n        modal === id &&\r\n        <div className=\"field-modal\">\r\n          <button onClick={save}>Сохранить</button>\r\n          <button onClick={handleClick}>Удалить</button>\r\n          <button onClick={modalClose}>Закрыть</button>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n","import React, { Component } from 'react';\nimport uniqid from 'uniqid';\nimport Field from './components/field';\n\nconst cart = JSON.parse(localStorage.getItem('cart'));\n\nconst init = {\n  fields: [{\n    id: uniqid(),\n    type: 'plus',\n    value: '',\n    date: new Date().toLocaleString()\n  }],\n  total: 0,\n  modal: null,\n  lastValue: 0,\n  type: null,\n  users: ['Назар', 'Виталик', 'Мама'],\n  openUser: false,\n  debtor: null\n};\n\nclass App extends Component {\n  state = cart || init;\n\n  addField = ({ target }) => {\n    const type = target.getAttribute('data-field');\n\n    const field = {\n      id: uniqid(),\n      type,\n      value: '',\n      date: new Date().toLocaleString()\n    };\n\n    this.setState({ fields: [...this.state.fields, field] });\n  }\n\n  deleteField = id => {\n    this.setState({\n      fields: this.state.fields.filter(item => item.id !== id)\n    }, this.calc)\n  }\n\n  calc = () => {\n    this.setState((state) => {\n      const length = state.fields.length;\n      const fields = state.fields.filter(item => item.value !== '');\n      const total = fields.reduce((result, item) => {\n        if (item.type === 'plus') {\n          return result + Number(item.value);\n        } else if (item.type === 'minus') {\n          return result - Number(item.value);\n        }\n      }, 0);\n      return {\n        total: total.toFixed(2),\n        lastValue: length === 0 ? 0 : state.lastValue,\n        debtor: length === 0 ? null : state.debtor\n      }\n    }, () => {\n      this.saveLocalStorage();\n    })\n  }\n\n  fieldChange = () => {\n\n  }\n\n  saveLocalStorage = () => {\n    localStorage.setItem('cart', JSON.stringify(this.state));\n  }\n\n\n  setModal = id => this.setState({modal: id})\n\n\n  saveField = (id, value, type) => {\n    this.setState((state) => {\n      return {\n        fields: state.fields.map(item => {\n          if (item.id === id) {\n            item.value = value;\n            item.date = new Date().toLocaleString();\n          }\n          return item;\n        }),\n        lastValue: value,\n        type: type === 'minus' ? '-' : '+'\n      }\n    }, () => {\n      this.setModal(null);\n      this.calc();\n    })\n  }\n\n  showUsers = () => {\n    this.setState({openUser: true});\n  }\n\n\n  setUser = (item) => () => {\n    this.setState({\n      debtor: item,\n      openUser: false\n    }, this.saveLocalStorage)\n  }\n\n  render() {\n    const { fields, lastValue, type, debtor } = this.state;\n\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <div className=\"container\">\n            <div className=\"total\">\n              <p>Всего: {this.state.total} грн</p>\n              <p onClick={this.showUsers}>Должен: {debtor}</p>\n              <span>Последняя сумма: {type} {lastValue} грн</span>\n            </div>\n            {this.state.openUser &&\n              <div className=\"user-modal\">\n                <ul>\n                {this.state.users.map(item => {\n                  return (\n                    <li key={item} onClick={this.setUser(item)}>{item}</li>\n                  )\n                })}\n                </ul>\n              </div>\n            }\n          </div>\n        </header>\n        <main>\n          <div className=\"container\">\n            {\n              fields.length > 0\n                ? fields.map(item => {\n                  return (\n                    <Field\n                      key={item.id}\n                      id={item.id}\n                      type={item.type}\n                      startValue={item.value}\n                      date={item.date}\n                      saveField={this.saveField}\n                      modal={this.state.modal}\n                      deleteField={this.deleteField}\n                      setModal={this.setModal}\n                    />\n                  )\n                })\n                : null\n            }\n            <div className=\"actions\">\n              <button className=\"button-minus\" data-field=\"minus\" onClick={this.addField}>-</button>\n              <button className=\"button-plus\" data-field=\"plus\" onClick={this.addField}>+</button>\n            </div>\n          </div>\n        </main>\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './main.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}